
## Events
You can run hook scripts on these events:

- Before and after a backup
- Before and after the deletion of a backup
- Before and after a WAL file is archived
- Before and after a WAL file is deleted

## Types 
There are two types of hook scripts that Barman can manage:

- Standard hook scripts
- Retry hook scripts

The only difference between these two types of hook scripts is that Barman executes a standard hook script only once, without checking its return code, whereas a retry hook script may be executed more than once, depending on its return code.

Specifically, when executing a retry hook script, Barman checks the return code and retries indefinitely until the script returns either `SUCCESS` (with standard return code 0), or `ABORT_CONTINUE` (return code 62), or `ABORT_STOP` (return code 63). Barman treats any other return code as a transient failure to be retried. 

A hook script can control its workflow by specifying whether a failure is transient. Also, in case of a 'pre' hook script, by returning `ABORT_STOP`, users can request Barman to interrupt the main operation with a failure.

## Order of operation

Hook scripts are executed in the following order:

1. The standard 'pre' hook script (if present)
2. The retry 'pre' hook script (if present)
3. The actual event (i.e. backup operation, or WAL archiving), if retry 'pre' hook script was not aborted with `ABORT_STOP`
4. The retry 'post' hook script (if present)
5. The standard 'post' hook script (if present)
6. The output generated by any hook script is written in the log file of Barman.

!!!note
    `ABORT_STOP` is ignored by retry 'post' hook scripts. In these cases, apart from logging an additional warning, `ABORT_STOP` will behave like `ABORT_CONTINUE`.








