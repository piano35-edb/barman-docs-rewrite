
## Events
You can run hook scripts on these events:

- Before and after a backup
- Before and after the deletion of a backup
- Before and after a WAL file is archived
- Before and after a WAL file is deleted

## Types 
There are two types of hook scripts that Barman can manage:

- Standard hook scripts
- Retry hook scripts

### Differences 

Hook scripts differ in the following ways:

- **Standard**:  Barman executes a standard hook script only once, without checking its return code.
- **Retry**:  Barman may execute a retry hook script more than once, depending on its return code.

When executing a retry hook script, Barman checks the return code and retries indefinitely until the script returns either of the following:

|**Message**|**Return code**|
|-----------|---------------|
|`SUCCESS`|0|
|`ABORT_CONTINUE`|62|
|`ABORT_STOP`|63|

Barman treats any other return code as a transient failure to be retried. 

A hook script can control its workflow by specifying whether a failure is transient.  In the event of a pre-hook script returning `ABORT_STOP`, you can request Barman to interrupt the main operation with a failure.

## Order of operation

Hook scripts are executed in the following order:

1. The standard pre-hook script (if present)
2. The retry pre-hook script (if present)
3. The actual event (i.e. backup operation, or WAL archiving), if the retry 'pre' hook script was not aborted with `ABORT_STOP`
4. The retry post-hook script (if present)
5. The standard post-hook script (if present)
6. The output generated by any hook script is written in the log file of Barman.

!!!note
    `ABORT_STOP` is ignored by retry post-hook scripts. In these cases, apart from logging an additional warning, `ABORT_STOP` will behave like `ABORT_CONTINUE`.








