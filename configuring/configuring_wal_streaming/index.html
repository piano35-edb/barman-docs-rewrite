
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://piano35-edb.github.io/configuring/configuring_wal_streaming/">
      
      
        <link rel="prev" href="../configuring_wal_archiving_replication/">
      
      
        <link rel="next" href="../configuring_windows/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>Configuring WAL Streaming - Barman  (Backup and Recovery Manager for PostgreSQL)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#enable-transaction-log-streaming" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Barman  (Backup and Recovery Manager for PostgreSQL)" class="md-header__button md-logo" aria-label="Barman  (Backup and Recovery Manager for PostgreSQL)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Barman  (Backup and Recovery Manager for PostgreSQL)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuring WAL Streaming
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../license/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../download/" class="md-tabs__link">
        
  
    
  
  Download

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../version_support/" class="md-tabs__link">
          
  
    
  
  Installing

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../configuration_files/" class="md-tabs__link">
          
  
    
  
  Configuring

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../customizing/binary_paths/" class="md-tabs__link">
          
  
    
  
  Customizing

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../backing_up/requirements/" class="md-tabs__link">
          
  
    
  
  Backing Up

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../recovering/using_recovery/" class="md-tabs__link">
          
  
    
  
  Recovering

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../commands/using_commands/" class="md-tabs__link">
          
  
    
  
  Commands

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../upgrade_paths/" class="md-tabs__link">
          
  
    
  
  Upgrading

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../troubleshooting/" class="md-tabs__link">
        
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scripts/backup-scripts/" class="md-tabs__link">
          
  
    
  
  Scripts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../external_content/blogs/" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Barman  (Backup and Recovery Manager for PostgreSQL)" class="md-nav__button md-logo" aria-label="Barman  (Backup and Recovery Manager for PostgreSQL)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Barman  (Backup and Recovery Manager for PostgreSQL)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F.A.Q.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../philosophy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Philosophy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Download
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Installing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version_support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reqs_limits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements and Limitations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Configuring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring_options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring_new_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring a New Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring_ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring_wal_archiving_replication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring WAL Archiving and Replication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configuring WAL Streaming
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configuring WAL Streaming
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#enable-transaction-log-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Enable transaction log streaming
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#replication-slots" class="md-nav__link">
    <span class="md-ellipsis">
      Replication slots
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-wal-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring WAL streaming
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring WAL streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#streaming-wals-and-backups-from-different-hosts" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming WALs and backups from different hosts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Restrictions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations-of-partial-wal-files-with-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations of partial WAL files with recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wal-archiving-via-archive_command" class="md-nav__link">
    <span class="md-ellipsis">
      WAL archiving via archive_command
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wal-archiving-via-barman-wal-archive" class="md-nav__link">
    <span class="md-ellipsis">
      WAL archiving via barman-wal-archive
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wal-archiving-via-rsyncssh" class="md-nav__link">
    <span class="md-ellipsis">
      WAL archiving via rsync/SSH
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-of-wal-archiving-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Verification of WAL archiving configuration
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuring_windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Windows
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Customizing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Customizing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/binary_paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binary Paths
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/cluster_integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/configuration_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/geographical_redundancy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geographical Redundancy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/lock_file_directory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lock File Directory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/parallel_jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallel Jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../customizing/passive_nodes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passive Nodes
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backing Up
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Backing Up
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/bandwidth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bandwidth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/cloud-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud and snapshot backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/compression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compression
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/concurrent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concurrent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/immediate_checkpoint/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Immediate Checkpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/incremental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Incremental Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/local_backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/streaming_backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming Backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/rsync_ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backups with rsync / SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../backing_up/cloud_snapshots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backups with cloud snapshots
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Recovering
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Recovering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recovering/using_recovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recovering/cloud-restores/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud and snapshot restores
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recovering/recovering_from_snapshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recovering from snapshot backups
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/using_commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/barman-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Barman CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_3" >
        
          
          <label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    General commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_3">
            <span class="md-nav__icon md-icon"></span>
            General commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/general/commands_general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/general/cron/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cron
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/general/diagnose/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Diagnose
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/general/list-servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    List-servers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
        
          
          <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backup commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4">
            <span class="md-nav__icon md-icon"></span>
            Backup commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/backup/check-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    check-backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/backup/show-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    show-backup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cloud commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            Cloud commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud_commands_using/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Cloud commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-backup-delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud backup delete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-backup-keep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud backup keep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-backup-list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud backup list
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-backup-show/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud backup show
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-check-wal-archive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud check-wal-archive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud restore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-wal-archive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud wal-archive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/cloud/cloud-wal-restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud wal-restore
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" >
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Server commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            Server commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/commands_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/archive-wal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    archive-wal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/config-update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config-update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/config-switch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config-switch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/delete/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    delete
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/generate-manifest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generate-manifest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/get-wal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    get-wal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/keep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keep
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/list-backups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list-backups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/list-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list-files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/list-servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list-servers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/lock-directory-cleanup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lock-directory-cleanup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/put-wal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    put-wal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/rebuild-xlogdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rebuild-xlogdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/receive-wal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    receive-wal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/recover/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    recover
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/replication-status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    replication-status
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/show-servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    show-servers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    status
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/switch-wal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    switch-wal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/sync-info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sync-info
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/verify-backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    verify-backup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/wal-restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wal-restore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/server/wal-archive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wal-archive
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Upgrading
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Upgrading
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade_paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade Paths
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/backup-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/backup-delete-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup delete scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/cloud-hook-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud hook scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/hook-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hook scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/wal-archive-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wal archive scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/wal-delete-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wal delete scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/recovery-scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recovery scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/script-variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Script variables
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../external_content/blogs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blogs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../external_content/books/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Books
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../external_content/tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Configuring WAL Streaming</h1>

<p>Barman can reduce the Recovery Point Objective (RPO) by allowing users to add continuous WAL streaming from a PostgreSQL server, on top of the standard archive_command strategy.</p>
<p>Barman relies on <a href="https://www.postgresql.org/docs/current/static/app-pgreceivewal.html">pg_receivewal</a>.  It exploits the native streaming replication protocol and continuously receives transaction logs from a PostgreSQL server (master or standby). </p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Prior to PostgreSQL 10, <code>pg_receivewal</code> was named <code>pg_receivexlog</code>.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Barman requires that <code>pg_receivewal</code> is installed on the same server. It's recommended to install the latest available version of <code>pg_receivewal</code>, as it is back compatible. Otherwise, users can install multiple versions of <code>pg_receivewal</code> on the Barman server and properly point to the specific version for a server, using the <code>path_prefix</code> option in the configuration file.</p>
</div>
<h2 id="enable-transaction-log-streaming">Enable transaction log streaming<a class="headerlink" href="#enable-transaction-log-streaming" title="Permanent link">&para;</a></h2>
<p>To enable streaming of transaction logs:</p>
<ol>
<li>Set up a streaming connection.</li>
<li>Set the <code>streaming_archiver</code> option to <code>on</code>.</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code>cron</code> command transparently manages log streaming through the execution of the <code>receive-wal</code> command. This is the recommended scenario.</p>
</div>
<p>Alternatively, you can manually execute the <code>receive-wal</code> command:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>barman<span class="w"> </span>receive-wal<span class="w"> </span><span class="se">\&lt;</span>server_name<span class="se">\&gt;</span>
</span></code></pre></div></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The <code>receive-wal</code> command is a foreground process.</p>
</div>
<p>Transaction logs are streamed directly in the directory specified by the <code>streaming_wals_directory</code> configuration option. They are then archived by the <code>archive-wal</code> command.</p>
<p>Unless otherwise specified in the <code>streaming_archiver_name</code> parameter, Barman will set the <code>application_name</code> of the WAL streamer process to <code>barman_receive_wal</code>.  This allows you to monitor the status in the <code>pg_stat_replication</code> system view of the PostgreSQL server.</p>
<h2 id="replication-slots">Replication slots<a class="headerlink" href="#replication-slots" title="Permanent link">&para;</a></h2>
<p>Replication slots are an automated way to ensure that the PostgreSQL server won't remove WAL files until they're received by all archivers. Barman uses this mechanism to receive transaction logs from PostgreSQL.</p>
<p>For more information about replication slots, see the <a href="https://www.postgresql.org/docs/current/static/warm-standby.html#STREAMING-REPLICATION-SLOTS">PostgreSQL manual</a>.</p>
<p>You can base your backup architecture on streaming connection only. This scenario is useful to configure Docker-based PostgreSQL servers and to work with PostgreSQL servers running on Windows.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Microsoft Windows support is still experimental, as it is not yet part of our continuous integration system.</p>
</div>
<h2 id="configuring-wal-streaming">Configuring WAL streaming<a class="headerlink" href="#configuring-wal-streaming" title="Permanent link">&para;</a></h2>
<p>The PostgreSQL server must be configured to stream the transaction log files to the Barman server.</p>
<p>To configure the streaming connection from Barman to the PostgreSQL server, enable the <code>streaming_archiver</code> by adding this line in the server configuration file:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">streaming_archiver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>**on**
</span></code></pre></div>
If you plan to use replication slots (recommended), another essential option for the setup of the streaming-based transaction log archiving is the <code>slot_name</code> option:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nv">slot_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>barman
</span></code></pre></div>
This option defines the name of the replication slot that will be used by Barman. It is required for using replication slots.</p>
<p>When configuring the replication slot name, you can manually create a replication slot for Barman with this command:
<div class="language-sql highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">barman</span><span class="o">@</span><span class="n">backup</span><span class="err">\$</span><span class="w"> </span><span class="n">barman</span><span class="w"> </span><span class="n">receive</span><span class="o">-</span><span class="n">wal</span><span class="w"> </span><span class="c1">--create-slot pg</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">Creating</span><span class="w"> </span><span class="n">physical</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="n">slot</span><span class="w"> </span><span class="s1">&#39;barman&#39;</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="s1">&#39;pg&#39;</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">Replication</span><span class="w"> </span><span class="n">slot</span><span class="w"> </span><span class="s1">&#39;barman&#39;</span><span class="w"> </span><span class="n">created</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">Starting</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">Barman</span><span class="w"> </span><span class="mi">2</span><span class="p">.</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="n">Barman</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">automatically</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="n">slot</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">setting</span><span class="p">:</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">create_slot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">auto</span>
</span></code></pre></div></p>
<h3 id="streaming-wals-and-backups-from-different-hosts">Streaming WALs and backups from different hosts<a class="headerlink" href="#streaming-wals-and-backups-from-different-hosts" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is supported only for Barman 3.10.0 and higher versions.</p>
</div>
<p>Barman uses the connection info defined in <code>streaming_conninfo</code> when creating <code>pg_receivewal</code> processes to stream WAL segments and uses <code>conninfo</code> when checking the status of replication slots. As <code>conninfo</code> and <code>streaming_conninfo</code> are also used when taking backups, this default configuration forces Barman to stream WALs and take backups from the same host.</p>
<p>If an alternative configuration is required, such as backups being sourced from a standby with WALs being streamed from the primary, then you can use the following options:</p>
<ul>
<li><code>wal_streaming_conninfo</code>: A connection string which Barman will use instead of streaming_conninfo when receiving WAL segments via the streaming replication protocol and when checking the status of the replication slot used for receiving WALs.</li>
<li><code>wal_conninfo</code>: An optional connection string specifically for monitoring WAL streaming status and performing related checks. If set, Barman will use this instead of <code>wal_streaming_conninfo</code> when checking the status of the replication slot.</li>
</ul>
<h3 id="restrictions">Restrictions<a class="headerlink" href="#restrictions" title="Permanent link">&para;</a></h3>
<p>The following restrictions apply and are enforced by Barman during checks:</p>
<ul>
<li>Connections defined by <code>wal_streaming_conninfo</code> and <code>wal_conninfo</code> must reach a PostgreSQL instance which belongs to the same cluster reached by the <code>streaming_conninfo</code> and <code>conninfo</code> connections.</li>
<li>The <code>wal_streaming_conninfo</code> connection string must be able to create streaming replication connections.</li>
<li>Either <code>wal_streaming_conninfo</code> <em>or</em> <code>wal_conninfo</code>, if it is set, must have permissions to read settings and check replication slot status. The required permissions can be any of:<ul>
<li>The <code>pg_monitor</code> role.</li>
<li>Both the <code>pg_read_all_settings</code> and <code>pg_read_all_stats roles</code>.</li>
<li>The <code>superuser</code> role.</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>While it's possible to stream WALs from any PostgreSQL instance in a cluster, there's a risk that WAL segments can be lost when streaming WALs from a standby, if the standby is unable to keep up with its own upstream source. It's recommended that WALs are always streamed directly from the primary.</p>
</div>
<h3 id="limitations-of-partial-wal-files-with-recovery">Limitations of partial WAL files with recovery<a class="headerlink" href="#limitations-of-partial-wal-files-with-recovery" title="Permanent link">&para;</a></h3>
<p>The standard behaviour of <code>pg_receivewal</code> is to write transactional information in a file with <code>.partial</code> suffix after the WAL segment name.</p>
<p>Barman expects a partial file to be in the <code>streaming_wals_directory</code> of a server. When completed, <code>pg_receivewal</code> removes the <code>.partial</code> suffix and opens the following one, delivering the file to the <code>archive-wal</code> command of Barman for permanent storage and compression.</p>
<p>In the case of a sudden and unrecoverable failure of the master PostgreSQL server, the <code>.partial</code> file that has been streamed to Barman contains very important information that the standard archiver (through PostgreSQL's <code>archive_command</code>) has not been able to deliver to Barman.</p>
<p>As of Barman version 2.10, the <code>get-wal</code> command is able to return the content of the current <code>.partial</code> WAL file through the <code>--partial/-P</code> option. This is useful in the case of recovery, either full or point in time. If you run a <code>recover</code> command with <code>get-wal</code> enabled, and without <code>--standby-mode</code>, Barman will automatically add the <code>-P</code> option to <code>barman-wal-restore</code>.  It will then relay that to the remote <code>get-wal</code> command in the <code>restore_command</code> recovery option.</p>
<p><code>get-wal</code> will also search in the incoming directory, in case a WAL file has already been shipped to Barman, but not yet archived.</p>
<h2 id="wal-archiving-via-archive_command">WAL archiving via <code>archive_command</code><a class="headerlink" href="#wal-archiving-via-archive_command" title="Permanent link">&para;</a></h2>
<p>The <code>archive_command</code> is the traditional method to archive WAL files.</p>
<p>The value of this PostgreSQL configuration parameter must be a shell command to be executed by the PostgreSQL server to copy the WAL files to the Barman incoming directory.</p>
<p>This can be done in two ways, both requiring a SSH connection:</p>
<ul>
<li>via <code>barman-wal-archive</code> utility <em>(for Barman 2.6 and higher versions)</em></li>
<li>via rsync/SSH <em>(This was a common approach with Barman 2.5 and lower versions.)</em></li>
</ul>
<p>For more information on how Barman supports this feature, see the "Concurrent Backup and backup from a standby" section.</p>
<h2 id="wal-archiving-via-barman-wal-archive">WAL archiving via <code>barman-wal-archive</code><a class="headerlink" href="#wal-archiving-via-barman-wal-archive" title="Permanent link">&para;</a></h2>
<p>For Barman 2.6 and higher versions, the recommended way to safely and reliably archive WAL files to Barman via <code>archive_command</code> is to use the <code>barman-wal-archive</code> command.  To use commands, <code>barman-cli</code> must be installed on each PostgreSQL server that is part of the Barman cluster.</p>
<p>Using <code>barman-wal-archive</code> instead of rsync/SSH reduces the risk of data corruption of the shipped WAL file on the Barman server. When using rsync/SSH as <code>archive_command</code>, there's no mechanism that guarantees that the content of the file is flushed and fsync-ed to disk on destination.</p>
<p>For this reason, we have developed the <code>barman-wal-archive</code> utility that natively communicates with Barman's <code>put-wal</code> command <em>(introduced in Barman version 2.6)</em>, which is responsible for receiving the file, fsync'ing its content, and placing it in the proper incoming directory for that server.  This reduces the risk of copying a WAL file in the wrong location or directory in Barman, as the only parameter to be used in the <code>archive_command</code> is the server ID.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information on the <code>barman-wal-archive</code> command, type <code>man barman-wal-archive</code>on the PostgreSQL server.</p>
</div>
<p>To verify that <code>barman-wal-archive</code> can connect to the Barman server, and that the required PostgreSQL server is configured in Barman to accept incoming WAL files, use the following command:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>barman-wal-archive<span class="w"> </span>--test<span class="w"> </span>backup<span class="w"> </span>pg<span class="w"> </span>DUMMY
</span></code></pre></div>
Where:</p>
<ul>
<li><code>backup</code> is the host where Barman is installed.</li>
<li><code>pg</code> is the name of the PostgreSQL server as configured in Barman.</li>
<li><code>DUMMY</code> is a placeholder (<code>barman-wal-archive</code> requires an argument for the WAL file name, which is ignored).</li>
</ul>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>If everything is configured correctly, the following output is returned:</p>
</div>
<p><div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Ready<span class="w"> </span>to<span class="w"> </span>accept<span class="w"> </span>WAL<span class="w"> </span>files<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>server<span class="w"> </span>pg
</span></code></pre></div>
Since it uses SSH to communicate with the Barman server, SSH key authentication is required for the <strong>postgres</strong> user to login as <strong>barman</strong> on the backup server. If a port other than the SSH default of 22 is used, the <code>--port</code> option can be added to specify the SSH port number.</p>
<p>Edit the <code>postgresql.conf</code> file of the PostgreSQL instance on the <strong>pg</strong> database, activate the archive mode and set <code>archive_command</code> to use <code>barman-wal-archive</code>:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nv">archive_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>**on**
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nv">wal_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;replica&#39;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nv">archive_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;barman-wal-archive backup pg %p&#39;</span>
</span></code></pre></div>
Restart the PostgreSQL server.</p>
<h2 id="wal-archiving-via-rsyncssh">WAL archiving via rsync/SSH<a class="headerlink" href="#wal-archiving-via-rsyncssh" title="Permanent link">&para;</a></h2>
<p>You can retrieve the incoming WALs directory using the <code>show-servers</code> Barman command and confirming the value of  <code>incoming_wals_directory</code>:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>barman@backup<span class="se">\$</span><span class="w"> </span>barman<span class="w"> </span>show-servers<span class="w"> </span>pg<span class="w"> </span>**<span class="se">\|</span>**grep<span class="w"> </span>incoming_wals_directory
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>incoming_wals_directory:<span class="w"> </span>/var/lib/barman/pg/incoming
</span></code></pre></div>
Edit the <code>postgresql.conf</code> file of the PostgreSQL instance on the <strong>pg</strong> database and activate the archive mode:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nv">archive_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>**on**
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nv">wal_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;replica&#39;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nv">archive_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;rsync -a %p barman@backup:INCOMING_WALS_DIRECTORY/%f&#39;</span>
</span></code></pre></div>
Ensure you change the <code>INCOMING_WALS_DIRECTORY</code> placeholder with the value returned by the previous <code>barman show-servers pg</code> command.</p>
<p>Restart the PostgreSQL server.</p>
<p>In some cases, you might want to add stricter checks to the <code>archive_command</code> process. For example:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nv">archive_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;test \$(/bin/hostname --fqdn) = HOSTNAME \\</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="s1">&amp;&amp; rsync -a %p barman@backup:INCOMING_WALS_DIRECTORY/%f&#39;</span>
</span></code></pre></div>
The <code>HOSTNAME</code> placeholder should be replaced with the value returned by <code>hostname --fqdn</code>. This <em>trick</em> is a safeguard in case the server is cloned, and avoids receiving WAL files from recovered PostgreSQL instances.</p>
<h2 id="verification-of-wal-archiving-configuration">Verification of WAL archiving configuration<a class="headerlink" href="#verification-of-wal-archiving-configuration" title="Permanent link">&para;</a></h2>
<p>To test that continuous archiving is on and properly working, check both the PostgreSQL server and the backup server. Confirm that the WAL files are collected in the destination directory.</p>
<p>Use the <code>switch-wal</code> command for verification:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>barman@backup<span class="se">\$</span><span class="w"> </span>barman<span class="w"> </span>switch-wal<span class="w"> </span>--force<span class="w"> </span>--archive<span class="w"> </span>pg
</span></code></pre></div>
The <code>switch-wal</code> command will force PostgreSQL to switch the WAL file and trigger the archiving process in Barman. Barman will wait for one file to arrive within 30 seconds. If no WAL file is received, an error is returned.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can change the 30-second timeout with the <code>--archive-timeout</code> option.</p>
</div>
<p>Verify if the WAL archiving has been correctly configured using the <code>barman check</code> command.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2011-2024  <a href="https://www.enterprisedb.com"  target="_blank" rel="noopener"></a>  <a href="https://www.enterprisedb.com/contact" target"_blank" rel="noopener">EnterpriseDB Corporation.  All rights reserved. </a> 

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/user/EnterpriseDB" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/EDBPostgres" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/enterprisedb" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/EDBpostgres" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.path", "navigation.indexes", "navigation.top", "toc.integrate", null, "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy", "content.code.select", "header.autohide"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>